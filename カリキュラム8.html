<!DOCTYPE html>
<html>
<head>
<title>カリキュラム8.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="%E6%8A%BD%E8%B1%A1%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%A8interface">抽象クラスとinterface</h1>
<h2 id="%E6%8A%BD%E8%B1%A1%E3%82%AF%E3%83%A9%E3%82%B9">抽象クラス</h2>
<p>今までクラスについて学習してきましたが、そのクラス自体のインスタンスを作成させたくない場合があると思います。
例えば、哺乳類というクラスがあり、哺乳類の派生に人間や猫、犬というクラスがあるとします。
哺乳類は以下のような特徴を持っています。</p>
<ul>
<li>背骨がある。</li>
<li>恒温動物である。</li>
<li>肺で呼吸する。</li>
<li>胎生である。</li>
</ul>
<p>このような特徴を持つクラスから人間や猫、犬などに派生すると考えます。
しかし、哺乳類というのは分類であって動物や物が存在するわけではありません。
そのため、哺乳類という動物や物などに実体があるとおかしなことになってしまいます。
このようなことを防ぐためには、実体(インスタンス)を作成できない派生専用のクラスが必要になります。この派生する専用のクラスのことを <strong>抽象クラス</strong> や <strong>abstractクラス</strong> (アブストラクトクラス)と呼びます。</p>
<p>抽象クラスは派生用のクラスであり、<code>new</code> をしてインスタンスを作成することはできませんが、親クラスや基底クラスになることはできます。また、変数として宣言することはできるため、多態性は守られます。</p>
<p>つまり、ジャンルとして哺乳類という変数を作成することができ、その中に人間や犬、猫といったクラスのインスタンス(実体)を保存することができるようになるということです。</p>
<h3 id="%E6%8A%BD%E8%B1%A1%E3%82%AF%E3%83%A9%E3%82%B9%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B">抽象クラスを作成する</h3>
<p>abstractのクラスは以下のように宣言することができます。</p>
<pre class="hljs"><code><div><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> クラス名{

} 
</div></code></pre>
<p>アクセス修飾子の前に <code>abstract</code> という文字をつけることで抽象クラスであることを示しています。</p>
<p>実際に<code>AbstractClass.cs</code>というファイルを作成し以下の記述をしてください。</p>
<pre class="hljs"><code><div><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">namespace</span> <span class="hljs-title">ConsoleApp1</span><span class="hljs-comment">//「ConsoleApp1」の部分は作成した時点の状態から書き換えないでください。</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AbstractClass</span>
    {
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> num1;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> num2;
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Call</span>(<span class="hljs-params"></span>)</span>
        {
            Console.WriteLine(<span class="hljs-string">"Called AbstractClass "</span>+(num1+num2));
        }
    }
}
</div></code></pre>
<p>また、 <code>AbstractSub1Class.cs</code> というファイルを作成し以下を記述してください。</p>
<pre class="hljs"><code><div><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">namespace</span> <span class="hljs-title">ConsoleApp1</span><span class="hljs-comment">//「ConsoleApp1」の部分は作成した時点の状態から書き換えないでください。</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AbstractSub1Class</span>:<span class="hljs-title">AbstractClass</span>
    {
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Call</span>(<span class="hljs-params"></span>)</span>
        {
            Console.WriteLine(<span class="hljs-string">"Called AbstractSub1Class "</span>+(num1+num2));
        }
    }
}
</div></code></pre>
<p>また、 <code>AbstractSub2Class.cs</code> というファイルを作成し以下を記述してください。</p>
<pre class="hljs"><code><div><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">namespace</span> <span class="hljs-title">ConsoleApp1</span><span class="hljs-comment">//「ConsoleApp1」の部分は作成した時点の状態から書き換えないでください。</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AbstractSub2Class</span>:<span class="hljs-title">AbstractClass</span>
    {
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Call</span>(<span class="hljs-params"></span>)</span>
        {
            Console.WriteLine(<span class="hljs-string">"Called AbstractSub2Class "</span>+(num1+num2));
        }
    }
}
</div></code></pre>
<p><code>Program.cs</code> を以下のように書き換えてください。</p>
<pre class="hljs"><code><div><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">namespace</span> <span class="hljs-title">ConsoleApp1</span>;<span class="hljs-comment">//「ConsoleApp1」の部分は作成した時点の状態から書き換えないでください。</span>
<span class="hljs-keyword">class</span> <span class="hljs-title">Program</span>
{
    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-keyword">string</span>[] args</span>) <span class="hljs-comment">//Mainという関数作成する。</span></span>
    {
        <span class="hljs-comment">//AbstractClass abstractClass = new AbstractClass();//インスタンスが作成できないのでエラーが発生する </span>
        AbstractClass abstractClass1 = <span class="hljs-keyword">new</span> AbstractSub1Class();
        abstractClass1.num1 = <span class="hljs-number">10</span>;
        abstractClass1.num2 = <span class="hljs-number">15</span>;
        abstractClass1.Call();
        AbstractClass abstractClass2 = <span class="hljs-keyword">new</span> AbstractSub2Class();
        abstractClass2.num1 = <span class="hljs-number">5</span>;
        abstractClass2.num2 = <span class="hljs-number">10</span>;
        abstractClass2.Call();
    }
}
</div></code></pre>
<p>このプログラムを実行すると以下のようになります</p>
<pre class="hljs"><code><div>Called AbstractSub1Class 25
Called AbstractSub2Class 15

</div></code></pre>
<p>このように多態性を保持していることが理解できる。</p>
<p>7行目のはじめの <code>//</code> を削除し実行するとエラーが発生します。このようにインスタンスを作成しようとするとエラーが発生し、インスタンスを作成するができなくなっていることが確認できる。</p>
<h3 id="%E6%8A%BD%E8%B1%A1%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89">抽象メソッド</h3>
<p>抽象メソッドは抽象クラスに作成できるメソッドで抽象クラスでメソッドの内容を指定したくない場合に使うことができます</p>
<p><code>AbstractClass.cs</code> を以下のように書き換えます。</p>
<pre class="hljs"><code><div><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">namespace</span> <span class="hljs-title">ConsoleApp1</span><span class="hljs-comment">//「ConsoleApp1」の部分は作成した時点の状態から書き換えないでください。</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title">AbstractClass</span>
    {
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> num1;
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> num2;
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Call</span>(<span class="hljs-params"></span>)</span>;
    }
}
</div></code></pre>
<p>このように書くことでCallというメソッドがあるということを示すことはできますが、実際に中身はないので派生したクラスでは<code>void Call()</code>メソッドを<code>override</code>する必要があり、overrideし実装していない場合にエラーが発生します。
このようにメソッドの実装を強制することができます。</p>
<p>また、抽象メソッドの宣言は最後に<code>;</code>がいるので忘れないように気を付けてください。</p>
<h2 id="interface">interface</h2>
<p>interfaceは抽象クラスと似た機能を持っていますが、抽象クラスとは異なり、実装を強制するための要素となっています。
interfaceは純粋に多態性を持たせるための要素と考えることもできます。</p>
<p>また、抽象クラスとは異なり、実装を強制することはできますが、メソッドの中を書くなどのことはできなくなっています。
さらにinterfaceはメソッドの実装を強制をしますが変数などを宣言することができません。</p>
<h3 id="interface%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B">interfaceを作成する</h3>
<p>interfaceを作成するにはプロジェクト名の部分を右クリックし
追加→新しいファイルをクリックします</p>
<p><img src="./images/image8-1.png" alt="ファイル作成"></p>
<p>新しいファイルをクリックすると以下のような画面に切り替わります。</p>
<p>全般に移動し「空のインターフェース」を選択します。</p>
<p><img src="./images/image8-2.png" alt="ファイルの種類選択"></p>
<p>そして名前の部分に<code>TestInterface</code>と入力します。</p>
<p>その後作成をクリックすると以下のようなファイルが作成されます。</p>
<p><img src="./images/image8-3.png" alt="ファイルの種類選択"></p>
<p>コードとしては以下のようになっています</p>
<pre class="hljs"><code><div><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">namespace</span> <span class="hljs-title">ConsoleApp1</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">TestInterface</span>
    {

    }
}
</div></code></pre>
<p>ほとんどclassと同じようになっていますが、唯一違う部分は<code>class</code>と書いてあった部分が<code>interface</code>になった点です。
その他の違いはありませんので、クラスとしてファイルを作成したのちコードを書き換えても問題ありません。</p>
<h3 id="interface%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9">interfaceの使い方</h3>
<p>実際にinterfaceをどのように使うか説明します。</p>
<p>まず先ほど作成した<code>TestInterface</code>に以下のコードを書いてください。</p>
<pre class="hljs"><code><div><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">namespace</span> <span class="hljs-title">ConsoleApp1</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">TestInterface</span>
    {
        <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Hello</span>(<span class="hljs-params"></span>)</span>;
        <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">Sum</span>(<span class="hljs-params"><span class="hljs-keyword">int</span>[] values</span>)</span>;
    }
}
</div></code></pre>
<p>また、<code>TestInterface2</code>というクラスを作成して以下のコードを記述してください。</p>
<pre class="hljs"><code><div><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">namespace</span> <span class="hljs-title">ConsoleApp1</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">TestInterface2</span>
    {
        <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Bye</span>(<span class="hljs-params"></span>)</span>;
        <span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">Average</span>(<span class="hljs-params"><span class="hljs-keyword">int</span>[] values</span>)</span>;
    }
}
</div></code></pre>
<p>そして<code>Sub</code>というクラスを作成して(ある場合は書き換えて)以下のコードを記述してください。</p>
<pre class="hljs"><code><div><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">namespace</span> <span class="hljs-title">ConsoleApp1</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Sub</span>:<span class="hljs-title">TestInterface</span>,<span class="hljs-title">TestInterface2</span>
    {
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Hello</span>(<span class="hljs-params"></span>)</span>
        {
            Console.WriteLine(<span class="hljs-string">"Hello"</span>);
        }
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">Sum</span>(<span class="hljs-params"><span class="hljs-keyword">int</span>[] values</span>)</span>
        {

            <span class="hljs-keyword">int</span> sumNum = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; values.Length; i++)
            {
                sumNum = sumNum + values[i];
            }
            <span class="hljs-keyword">return</span> sumNum;
        }

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Bye</span>(<span class="hljs-params"></span>)</span>
        {
            Console.WriteLine(<span class="hljs-string">"Bye"</span>);
        }


        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">double</span> <span class="hljs-title">Average</span>(<span class="hljs-params"><span class="hljs-keyword">int</span>[] values</span>)</span>
        {

            <span class="hljs-keyword">double</span> sumNum = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; values.Length; i++)
            {
                sumNum = sumNum + values[i];
            }
            <span class="hljs-keyword">return</span> sumNum / values.Length;
        }
    }
}
</div></code></pre>
<p>そして<code>Program.cs</code>ファイルも以下のように書き換えてください。</p>
<pre class="hljs"><code><div><span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">namespace</span> <span class="hljs-title">ConsoleApp1</span>;
<span class="hljs-keyword">class</span> <span class="hljs-title">Program</span>
{
    <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-keyword">string</span>[] args</span>)</span>
    {
        <span class="hljs-keyword">int</span>[] nums = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[] { <span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>, <span class="hljs-number">40</span>, <span class="hljs-number">50</span> };
        Sub sub1 = <span class="hljs-keyword">new</span> Sub();
        sub1.Hello();
        <span class="hljs-keyword">int</span> sum = sub1.Sum(nums);
        Console.WriteLine(<span class="hljs-string">"合計は"</span> + sum + <span class="hljs-string">"です"</span>);
        <span class="hljs-keyword">double</span> ave = sub1.Average(nums);
        Console.WriteLine(<span class="hljs-string">"平均は"</span> + ave + <span class="hljs-string">"です"</span>);
        sub1.Bye();
        <span class="hljs-comment">//ここまでは通常通り実行することができる</span>

        <span class="hljs-comment">//TestInterface型のtest1にsub1代入しており型がSubからTestInterface型として扱われるようになる。</span>
        TestInterface test1 = sub1;

        test1.Hello();
        sum = test1.Sum(nums);
        Console.WriteLine(<span class="hljs-string">"合計は"</span> + sum + <span class="hljs-string">"です"</span>);


        test1.Bye();<span class="hljs-comment">//ここでエラーが出ます。ByeはTestInterfaceから派生した要素ではないのでここからは呼び出せません。</span>


        <span class="hljs-comment">//TestInterface型のtest1にsub1代入しており型がSubからTestInterface2型として扱われるようになる。</span>
        TestInterface2 test2 = sub1;

        ave = test2.Average(nums);
        test2.Bye();

        test2.Hello();<span class="hljs-comment">//ここでエラーが出ます。ByeはTestInterfaceから派生した要素ではないのでここからは呼び出せません。</span>
    }
}
</div></code></pre>
<p>これらのコードを実行しようとするとエラーが発生すると思います。
これは<code>sub1</code>を<code>test1</code>や<code>test2</code>に代入することで<code>TestInterface</code>や<code>TestInterface2</code>として扱われるため、それぞれの派生元の要素しか呼び出せないのでエラーが出るようになっている。</p>
<p><code>test1.Bye(nums);</code>と<code>test2.Hello();</code>の行をコメント化することでエラーが解消されるはずである。</p>
<p>また、<code>Sub</code>クラスの</p>
<pre class="hljs"><code><div><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Bye</span>(<span class="hljs-params"></span>)</span>{
    Console.WriteLine(<span class="hljs-string">"Bye"</span>);
}
</div></code></pre>
<p>の部分を削除してみるとエラーが発生すると思う。
これについてはinterfaceから継承しており実装を強制しているためである。</p>
<p>また、interfaceの強みは<code>Sub</code>クラスの4行目を見てもらえるとわかる通り、複数継承することができます。</p>
<p>interfaceで強制したい内容を部品のように扱うことができるのでそれぞれ違う内容を実装し複数継承し一つのクラスを作ることが可能になっています。さらにクラスから継承しつつさらにinterfaceを継承することができるので</p>
<pre class="hljs"><code><div>class クラス名:継承元クラス名,継承元interface名1,継承元interface名2
</div></code></pre>
<p>のように記述することもできます。ただし、クラスは1つしか継承できず、クラスとinterfaceを混ぜて継承する場合は最初にクラス名を書く必要がある、</p>
<h2 id="%E7%B7%B4%E7%BF%92%E5%95%8F%E9%A1%8C">練習問題</h2>
<h4 id="1-%E6%8A%BD%E8%B1%A1%E3%82%AF%E3%83%A9%E3%82%B9%E3%81%A8interface%E3%81%AE%E9%81%95%E3%81%84%E3%82%92%E8%AA%AC%E6%98%8E%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84">1. 抽象クラスとinterfaceの違いを説明してください。</h4>
<details><summary>解答例</summary>
<p>抽象クラスはインスタンスを作成できない派生するためのクラス
interfaceはメソッドの実装を強制し多態性を保持するためのクラス</p>
</details>
<h4 id="2-interface%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E7%B0%A1%E5%8D%98%E3%81%AA%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%82%92%E4%BD%9C%E6%88%90%E3%81%97%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84">2. interfaceを使って簡単なプログラムを作成してください。</h4>
<details><summary>解答例</summary>
<p>担当のメンターに確認してもらってください。</p>
<br>
<br>
<br>
<p>以下に例回答を示します。</p>
<p>IInfoというinterfaceを作成しIInfoのInfoOutというメソッドをinterfaceで実装させ、InfoOutを呼び出すとクラスの情報を返すように作成しました。</p>
<p>Program.cs,IInfo.cs,User.cs,Group.csの四つのファイルを作成しました。
IInfoはInfoOutの実装を強制するinterfaceです。
UserはIInfoから派生したクラスです。
GroupはIInfoから派生したクラスです。
ProgramはMainがありUserやGroupを使用するクラスです。</p>
<p>Program.csは以下のようなコードになっています。</p>
<pre class="hljs"><code><div><span class="hljs-keyword">namespace</span> <span class="hljs-title">ConsoleApp1</span>
{
    <span class="hljs-keyword">internal</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span>
    {
        <span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-keyword">string</span>[] args</span>)</span>
        {
            User user1 = <span class="hljs-keyword">new</span> User(<span class="hljs-string">"user1"</span>, <span class="hljs-number">13</span>);
            User user2 = <span class="hljs-keyword">new</span> User(<span class="hljs-string">"user2"</span>, <span class="hljs-number">14</span>);
            User user3 = <span class="hljs-keyword">new</span> User(<span class="hljs-string">"user3"</span>, <span class="hljs-number">15</span>);
            User user4 = <span class="hljs-keyword">new</span> User(<span class="hljs-string">"user4"</span>, <span class="hljs-number">16</span>);
            List&lt;User&gt; users = <span class="hljs-keyword">new</span> List&lt;User&gt;();
            users.Add(user1);
            users.Add(user3);
            Group <span class="hljs-keyword">group</span> = <span class="hljs-keyword">new</span> Group(<span class="hljs-string">"group1"</span>,users);

            List&lt;IInfo&gt; infos = <span class="hljs-keyword">new</span> List&lt;IInfo&gt;();
            infos.Add(user1);
            infos.Add(user2);
            infos.Add(user3);
            infos.Add(user4);
            infos.Add(<span class="hljs-keyword">group</span>);

            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; infos.Count; i++)
            {
                Console.WriteLine(infos[i].InfoOut());
            }
        }
    }
}
</div></code></pre>
<p>IInfo.csは以下のようなコードになっています。</p>
<pre class="hljs"><code><div><span class="hljs-keyword">namespace</span> <span class="hljs-title">ConsoleApp1</span>
{
    <span class="hljs-keyword">internal</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">IInfo</span>
    {
        <span class="hljs-function"><span class="hljs-keyword">string</span> <span class="hljs-title">InfoOut</span>(<span class="hljs-params"></span>)</span>;
    }
}
</div></code></pre>
<p>User.csは以下のようなコードになっています。</p>
<pre class="hljs"><code><div><span class="hljs-keyword">namespace</span> <span class="hljs-title">ConsoleApp</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">User</span>:<span class="hljs-title">IInfo</span>
    {
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">User</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> name, <span class="hljs-keyword">int</span> age</span>)</span>
        {
            Name = name;
            Age = age;
        }
        <span class="hljs-keyword">string</span> Name;
        <span class="hljs-keyword">int</span> Age;
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> <span class="hljs-title">InfoOut</span>(<span class="hljs-params"></span>)</span>
        {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"Name:"</span> + Name + <span class="hljs-string">" Age:"</span> + Age;
        }
    }
}
</div></code></pre>
<p>Group.csは以下のようなコードになっています。</p>
<pre class="hljs"><code><div><span class="hljs-keyword">namespace</span> <span class="hljs-title">ConsoleApp1</span>
{
    <span class="hljs-keyword">internal</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Group</span>:<span class="hljs-title">IInfo</span>
    {
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Group</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> groupName, List&lt;User&gt; users</span>)</span>
        {
            Name = groupName;
            Users = users;
        }
        <span class="hljs-keyword">string</span> Name;
        <span class="hljs-keyword">public</span> List&lt;User&gt; Users = <span class="hljs-keyword">new</span> List&lt;User&gt;();
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> <span class="hljs-title">InfoOut</span>(<span class="hljs-params"></span>)</span>
        {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"GroupName:"</span> + Name + <span class="hljs-string">"UserCount:"</span> + Users.Count;
        }
    }
}
</div></code></pre>
</details>
<h4 id="3-interface%E3%81%AE%E4%BD%BF%E3%81%88%E3%82%8B%E5%A0%B4%E9%9D%A2%E3%82%92%E8%80%83%E3%81%88%E3%81%A6%E3%81%8F%E3%81%A0%E3%81%95%E3%81%84">3. interfaceの使える場面を考えてください</h4>
<details><summary>解答例</summary>
<p>AとBという要素がありそれぞれの要素を持った型とA,Bのみの要素を持った型を存在させたい場合</p>
<p>あるメソッドの実装を強制したいとき</p>
<p>など</p>
</details>
</body>
</html>

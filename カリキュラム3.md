# Unity3:制御文・標準入出力・配列について理解する

カリキュラム1,2の学習で変数やデータの出力方法について学んできました。
今回はデータの入力方法や変数の値によって動作を変える方法やデータを一元に扱う方法などを学びます。

## 制御文

制御文とは変数の値などの条件によって実行する処理を変えることができる文のことです。
制御文を理解することで自由自在に繰り返しや動きを指定することができるようになります。

### if文

#### 基本的な使い方

if文を使用すると条件に応じて実行する処理を変えることができます。
書き方は以下のようになります。

また以下のコードはMainの中に書いてください。

```cs
int a = 1;
if(a == 0)
{
    Console.WriteLine("aは0です");
}

```

`if` の`()`中に条件を書きその条件を満たした場合には`{}`の中に書かれた処理を実行します。
ただし、`()`の中の条件を満たさなかった場合には`{}`の中の処理は実行されることはありません。
そのためこのプログラムを実行してもaの値が0ではないので何も表示されません。
しかし、最初の行の
```cs
int a = 1;
```
を
```cs
int a = 0;
```
にすることで`aは0です`と表示されます。

`if`の`()`の中の条件を条件式といいます。
条件式は条件を表すために式のように条件を書いたものになります。
`if`の`()`の中に条件式を書くことで条件を示すことができます。

そのためifの使い方は
```
if(条件式)
{
    条件を満たしたときに実行する命令
}
```
とあらわすことができます。

#### 条件式の書き方

条件式記号の前後に変数や値を入れることで値を比べることができます。
条件式で使用する記号は以下の表のとおりです。
また、以上・以下はその数値を含みますが、未満はその数値を含まないので注意してください。

|記号|意味|
|---|----|
|==|記号の左右の値が等しい|
|!=|記号の左右の値が等しくない|
|>|左の値が右の値より大きい|
|<|右の値が左の値より大きい|
|>=|左の値が右の値以上|
|<=|右の値が左の値以上|

そのためaの値が50以上という条件は以下の通り表すことができる

```
a >= 50
```

ただし、これだと複雑な条件を表現することができません。
なので条件を複数つなげることができます。
つなげる記号と意味は以下のようになっています。

|記号|意味|
|----|---|
| && | 右と左の条件の両方を満たしている|
| \|\| | 右と左の条件のどちらかを満たしている|

そのため、aの値が50以上、100未満の値という場合にはif`()`の中には

```
a >= 50 && a < 100
```

のように表すことができる。



#### 条件の練習問題

##### 1.aの値が50以下もしくはaの値が100より大きい時の条件式を答えてください。

<details><summary>解答</summary>

```
a <=50 || a > 100
```

</details>

##### 2.aかbの値が30より大きい時の条件式を答えてください。

<details><summary>解答</summary>

```
a > 30 || b > 30
```

</details>

##### 3.aの値が50以下もしくはbの値が100より大きい時の条件式を答えてください。

<details><summary>解答</summary>

```
a <= 50 || b > 100
```

</details>

##### 4.aとbの値がどちらも100以上の条件式を答えてください。

<details><summary>解答</summary>

```
a >= 100 && b >= 100
```

</details>

#### 複雑なif文

先ほど学習したif文である程度の制御はできますが、条件を満たしていない場合の処理を実行することができません。

if文で条件を満たしていない場合に処理を実行するには`else`という文を使います。

使い方は次のようになります。

```
if(条件式)
{
    条件を満たしたときに実行する処理
}
else
{
    条件を満たさなかったときに実行する処理
}
```

`else`の次の`{}`内の処理を記述することで条件を満たさなかったときに処理を実行することができます。

elseを使用することで以下のように条件で処理を分類することができます。

```
if(条件式1)
{
    //条件1を満たした時に実行する処理 
}
else
{
    if(条件式2)
    {
        //条件式1を満たさず条件式2を満たしたときの処理
    }
    else
    {
        //条件をすべて満たさなかったときの処理
    }
}
```

しかし、これでは`{}`が多くなり少し読みづらくなってしまいます。
そのため以下のように書き換えることができます。

```
if(条件式1)
{
    //条件1を満たした時に実行する処理 
}
else if(条件式2)
{
    //条件式1を満たさず条件式2を満たしたときの処理
}
else
{
    //条件をすべて満たさなかったときの処理
}
```

このように書き換えることでわかりやすく分類わけすることができるようになります。

また、else ifは複数連結して使うことができるので以下のような書き方も可能です。

```
if(条件式1)
{
    //条件1を満たした時に実行する処理 
}
else if(条件式2)
{
    //条件式1を満たさず条件式2を満たしたときの処理
}
else if(条件3)
{
    //件式1を満たさず条件式2を満たさず条件式3を満たしたときの処理
}
else
{
    //条件をすべて満たさなかったときの処理
}
```

実際にelseを使ったプログラムは以下のようになります。(メインの中に書く)

```
int a=100;

if(a>=200)
{
    Console.WriteLine("aは200以上です");
}
else if(a>=100)
{
    Console.WriteLine("aは100以上200未満です");
}
else if(a>=50)
{
    Console.WriteLine("aは50以上100未満です");
}
else if(a>=10)
{
    Console.WriteLine("aは10以上50未満です");
}
else
{
    Console.WriteLine("10未満です");
}
```

最初にaに代入する値を10,55,130,400にしそれぞれ実行結果を確認してください。




## 繰り返し文

### while文

while文はif文と使い方が少し似ています。if文は条件を満たしている時`{}`内の処理を実行しますが、while文は`{}`内の処理を条件を満たしている間に繰り返し続け、繰り返しのたびに条件を確認し条件を満たさなくなったら繰り返しを終了します。

書き方は以下のようにifという文字をwhileに変えただけになります。

```
while(続ける条件式)
{
    //繰り返し実行する処理
}
```

そのため10回繰り返し実行するには以下のように書くことができます。(Mainの中)

```cs
int i = 1;
while(i <= 10)
{
    Console.WriteLine(i+"回目");
    i = i + 1;
}
```
最初にiを1としておきiが10以下の間繰り返します。
繰り返しの最後にiの値を1ずつ大きくすることで10回繰り返すようになっています。

しかし、5行目の
```
i = i + 1;
```

を忘れてしまうとずっと繰り返してしまいますし、少しわかりづらいです。

そこで登場するのがfor文です
for文は特に繰り返しに特化した制御文です。

### do-while

先ほど使用したwhileは繰り返しが始まる前に確認する文であったがdo-whileを使用するとループが終わった時点で終了するかを判定することができます。

do-whileは以下のように使用します

```
do
{

}while(条件);
```

`{}`内の命令は最初の条件にかかわらず実行されますがwhileの条件を満たしている場合にもう一度繰り返しを行います。
whileとは異なる点は最初に条件を判定されないという点です。

do-whileがよく使われる場面は入力の判定をするときなどによく使われます
例えば文字数が10文字以下になるまで何度も値を入力するというプログラムの実装によく使われます
Main関数に以下のようなコードを書くことで実装することができます

```cs
string input="";
do
{
    input = Console.ReadLine();
}while(input.Length > 10);
```

`input.Length`で文字列の長さを取得することができますが、通常のwhileであれば`input`の初期値は0文字であるため繰り返しの中は実行されずinputに値を入れることはできません。
しかしdo-whileであれば最初は絶対に実行されるため入力の判定などによく使用されます。

### for文

for文は以下のように書けます。

```
for(初期化;続ける条件式;増分)
{ 
    //繰り返し実行する処理
}
```

`初期化`の部分はwhileの例の1行目の
```
int i = 0;
```
にあたり、繰り返しで使用する変数の初期値を設定することができます。
`続ける条件式`はwhileの`()`内と同様になります。
`増分`の部分は5行目にあたり、繰り返しの際に値を変更したい場合に使用できます。

また、`初期値` `続ける条件` `増分`はそれぞれ省略することが可能であり、`初期値`と`増分`を省略することでwhileと同様の動作になります。
`続ける条件`を省略することでずっと繰り返す**無限ループ**になります。


先ほどのwhileの繰り返しを書き換えると以下のように表すことができます。

```cs
for(int i = 1;i <= 10;i = i + 1)
{ 
    Console.WriteLine(i+"回目");
}
```


このように表すことができます。
今回使用されている変数iは繰り返し回数を数えるための変数です。
そのため**ループ変数**や**カウンタ変数**と呼ばれています。

また、C#や多くの言語のプログラムでは繰り返しを行う時にカウンタ変数を1から始めることは少ないです。
多くの場合**0**から数えることが多いです。
0からの場合以下のように書き換えることができます。

```cs
for(int i = 0;i < 10;i = i + 1)
{ 
    Console.WriteLine((i+1)+"回目");
}
```

なぜ、0からのカウントが多いのかについては今後説明しますが、初期値は0からにすることをお勧めします。

また、ループの中にループを作ることはできますが、ループ変数は**別の変数**にする必要があるのでi以外に別名で作成する必要があります。
よくある変数の名前の付け方としてはループ変数では
i,j,k,ii,ij,ik,ji,jj,jkとしていくことが多いですが、任意の名前で構いません。

### break文・continue文

break文はループで任意のタイミングでループを抜け出すことができる命令です。
whileやforで指定した条件より早くループを終了したい際に使用します。
使い方としては以下のように使用します。

```cs
int b = 0;
for(int i = 0;i<100;i++)
{
    b = i*i;
    if(b>250)
    {
        break;
    }
}
```

このプログラムであればiが100になるまでの間でbが250より大きくなる場合は繰り返しを抜けるということになります。
比較的よく使う文ですのでしっかりと覚えていてください。

continue文はcontinue文が呼ばれた時点で次のループに移る命令です
実際に使ったプログラムは以下のようになります。

```cs
for(int i = 0;i<100;i++)
{
    if(i%2 == 0)
    {
        continue;
    }
    Console.WriteLine(i);
}
```

このプログラムはiが2で割り切れるとき、つまり偶数の場合にのみ`Console.WriteLine(i)`を呼び出さずに次のループに移ります。
結果として奇数だけ表示されるようになります。
continue文はあまり使う機会は多くはないですが、理解しておくと便利な場面があるのでしっかりと覚えておきましょう。

## 標準入出力

標準入出力とは文字で値を入力したり出力する方法です。
標準出力の命令`Console.WriteLine`などで値を出力することができるとは学習しましたが、入力することはできませんでした。
なので入力する方法について学習します。

標準入力は以下のように表現することができます。

```cs
string a;
a = Console.ReadLine();
```

`Console.ReadLine`の命令は入力した値を`=`の左側の変数に入れることができる命令です。
しかし、左側の変数は**string型である**必要があります。
そのため入力した値を数値として扱うには数値型への変換が必要になります。

### 文字列型から数値型への変換

文字列型から数値に変換する型について説明します。

通常double型からint型やint型からfloat型などの数値型同士はキャスト演算子というものを使い型の変換を行います。

```cs
int a = 10;
double b;
b = (double)a;
```

このように変換したい値の前に変換したい型を`()`で囲んで記述することで型を変換することが可能です。

しかしながらstring型とintなどの数値型はこのように変換することができません。
stringには数値以外の値が入る可能性もありこのような仕様になっています。

ではどのように変換するのかというと`Parse`命令を使います。
使用例は以下の通りです。

```cs
int a;
string s = "10";
a = int.Parse(s);

```

このように

```
変換したい型名.Perse(s);
```

と記述することで任意の**数値型**に変換することができます。

逆に数値から文字列に変換するには`ToString`命令を使用します。

```
int a = 10;
string b;

b = a.ToString();
```
のように記述できます。

値を二つ読み込みその結果を出力するプログラムは以下のようになります。(Mainの中)

```cs
string tmp;
int a,b,c;
Console.Write("数値を入力してください");
tmp = Console.ReadLine();
a = int.Parse(tmp);
tmp = Console.ReadLine();
b = int.Parse(tmp);
c = a + b;
Console.WriteLine(c);
```

このプログラムを実行すると入力された二つの数値の答えが出力されます。

## 配列

配列は複数の変数をまとめたもので長さが固定されたリストのようなものです。

配列の宣言は以下のようになります。

```
型名[] 変数名 = new 型名[配列の要素数];
```

実際に要素数が100のint型の配列を作成する例を以下に示します。

```cs
int[] a = new int[100];
```

このように宣言することで100個のint型の変数を扱うことが可能になります。

実際に値を代入、参照する方法を紹介します。

```cs
int[] a = new int[100];//要素数100のintの配列aを作る
a[0]=10;//配列aの一番最初の要素に10を代入する
```

このように
```
配列名[番号]
```
で変数と同じように扱うことが可能になります。
注意が必要なのは1からではなく0から番号が始まっているということです。
今回は100個の要素数の配列を作ったので0~99番目の値を扱うことができるということになります。
また、番号は**インデックス**と呼ばれます。

先ほど繰り返しの際に0から始めるということはここにつながります。
配列などが0から数え始めるので繰り返し文で配列などを扱うことが多く扱いやすいため0からのカウントが一般的になっています。

### 配列とループ

ループで配列を扱う方法について説明します。

ループで標準入力からの入力をintに変換しintの配列入れるプログラムの例を示します。

```cs
int[] a = new int[10];
string tmp;
for(int i = 0;i<a.Length;i++)
{
    tmp = Console.ReadLine();
    a[i] = int.Parse(tmp);
}
```

`a.Length`というのがありますが
```
配列名.Length
```
とすると要素の数を調べることができます。
今回であれば10なので0から9の間繰り返すことになります。
実はこのように個数を取得してループするときに都合がよいので0からループを開始することが多くなっています。
また、`a[i]`の部分を見てわかるようにインデックスの部分は実際に数値を入れる必要はなく変数でも問題ありません。

## 練習問題

#### 1.変数aが15未満の時は「低温」15以上22未満の時は「適温」22以上の時は「高温」と表示するプログラムを`&&`を使用せずに作成して下さい。

<details><summary>解答</summary>

```cs
namespace ConsoleApp1;
class Program //Programというまとまりを作る
{
    static void Main(string[] args) //Mainという関数作成する。
    {
        string s = Console.ReadLine();
        int a = int.Parse(s);
        if(a < 15)
        {
            Console.WriteLine("低温");
        }
        else if(a >= 22)
        {
            Console.WriteLine("高温");
        }
        else
        {
            Console.WriteLine("適温");
        }
    }
}
```

</details>

#### 2.10人の点を入力し配列に格納し平均点を出力するプログラムを作成してください。

<details><summary>解答例1</summary>

```cs
namespace ConsoleApp1;
class Program //Programというまとまりを作る
{
    static void Main(string[] args) //Mainという関数作成する。
    {
        int[] scores = new int[10]; //点数を一時的に保存する配列
        int sum; //合計を一時的に格納する変数
        double ave; //平均値を格納する変数
        for(int i = 0;i<10;i++)
        {
            Console.Write((i+1)+"番目の人の点数を入力:");
            string tmp = Console.ReadLine();
            scores[i]=int.Parse(tmp);

        }
        sum = 0; //sumを0で初期化する
        for(int i = 0;i<10;i++)
        {
            sum = sum + scores[i];//ループで合計値を求めていく
        }
        ave = (double)sum / 10.0;//平均値を求める。
        //sumをdoubleにキャスト後計算することで結果がdoubleとなり切り捨てられないようにする

        Console.WriteLine("10人の平均値は"+ave+"です");
    }
}
```

</details>

<details><summary>解答例2</summary>

```cs
namespace ConsoleApp1;
class Program //Programというまとまりを作る
{
    static void Main(string[] args) //Mainという関数作成する。
    {
        int[] scores = new int[10]; //点数を一時的に保存する配列
        int sum; //合計を一時的に格納する変数
        double ave; //平均値を格納する変数
        for(int i = 0;i< scores.Length;i++)
        {
            Console.Write((i+1)+"番目の人の点数を入力:");
            scores[i]=int.Parse(Console.ReadLine()); //変数に一時的に入れずに型を変更する。

        }
        sum = 0; //sumを0で初期化する
        for(int i = 0;i< scores.Length;i++)
        {
            sum = sum + scores[i];//ループで合計値を求めていく
        }
        ave = (double)sum / scores.Length;//平均値を求める。
        //sumをdoubleにキャスト後計算することで結果がdoubleとなり切り捨てられないようにする

        Console.WriteLine("10人の平均値は"+ave+"です");
    }
}
```

</details>

#### 3. 2のプログラムを改造し10人の平均点を出力後平均点以下の人の番号を出力するプログラムを作成してください。
※出力する番号は1番から数えていくものとしてください。
<details><summary>解答例</summary>

```cs
namespace ConsoleApp1;
class Program //Programというまとまりを作る
{
    static void Main(string[] args) //Mainという関数作成する。
    {
        int[] scores = new int[10]; //点数を一時的に保存する配列
        int sum; //合計を一時的に格納する変数
        double ave; //平均値を格納する変数
        for(int i = 0;i< scores.Length;i++)
        {
            Console.Write((i+1)+"番目の人の点数を入力:");
            scores[i]=int.Parse(Console.ReadLine());
        }
        sum = 0; //sumを0で初期化する
        for(int i = 0;i< scores.Length;i++)
        {
            sum = sum + scores[i];//ループで合計値を求めていく
        }
        ave = (double)sum /  scores.Length;//平均値を求める。
        //sumをdoubleにキャスト後計算することで結果がdoubleとなり切り捨てられないようにする

        Console.WriteLine("平均点以下の人の番号は以下のようになります。");

        for(int i = 0;i< scores.Length;i++)
        {
            if(ave >= scores[i]) //インデックスi番目のscoresの値がave以下か確認する
            {
                Console.WriteLine((i+1)+"番");//条件を満たした番号を出力
            }
        }
    }
}
```

</details>